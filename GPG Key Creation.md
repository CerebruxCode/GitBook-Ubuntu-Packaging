# Δημιουργία κλειδιού κρυπτογράφησης (GPG)

Ένα **κλειδί κρυπτογράφησης** μπορεί να χρησιμοποιηθεί σε διάφορες περιπτώσεις. Χρησιμοποιείται κυρίως στην επικοινωνία και στην υπογραφή πακέτων, για την επιβεβαίωση της πηγής του πακέτου ή ενός μηνύματος.

Για την συγκεκριμένη περίπτωση, η χρήση του αφορά την υπογραφή πακέτων ώστε να θεωρούνται ως αξιόπιστη πηγή από τα συστήματα που θα χρησιμοποιήσουμε.

Θα δούμε, εν συντομία, πως δημιουργεί κάποιος ένα κλειδί **GPG**:

1. Στο τερματικό, εκτελούμε:
```bash
gpg --gen-key```
2. Θα εμφανιστεί το παρακάτω:
```bash
Please select what kind of key you want:
(1) RSA and RSA (default)
(2) DSA and Elgamal
(3) DSA (sign only)
(4) RSA (sign only)```
Όπου πατάμε **ENTER** για να πάρει την default (1) ρύθμιση.
3. Στην συνέχεια, θα δούμε αυτό:
```bash
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048)```
Και εδώ πάλι πατάμε **ENTER**.
4. Στο επόμενο βήμα:
```bash
Requested keysize is 2048 bits
Please specify how long the key should be valid.
0 = key does not expire
<n> = key expires in n days
<n>w = key expires in n weeks
<n>m = key expires in n months
<n>y = key expires in n years
Key is valid for? (0)
Key does not expire at all
Is this correct? (y/N)```
Και εδώ πάλι πατάμε **ENTER** και μετά το πλήκτρο **Y** (ναι) για επιβεβαίωση.
5. Στη συνέχεια, θα εμφανιστεί το εξής:
```bash
You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
"Heinrich Heine (Der Dichter) <heinrichh@duesseldorf.de>"
Real name: Όνομα Επίθετο
Email address: e-mail
Comment: Sign Package key
You selected this USER-ID:
"Όνομα Επίθετο (Sign Package key) "```
Πληκτρολογούμε το **ονοματεπώνυμό** μας (**πρέπει να είναι το κανονικό μας ονοματεπώνυμο**), την **διεύθυνση e-mail** μας και πατάμε το πλήκτρο "**O**" για να δημιουργηθεί το κλειδί.
6. Εν συνεχεία, θα μας ζητηθεί να δημιουργήσουμε έναν **κωδικό** για αυτό:
```bash
You need a Passphrase to protect your secret key.```
Πληκτρολογούμε τον κωδικό μας προσεκτικά (δύο φορές για επαλήθευση) και το κλειδί GPG θα δημιουργηθεί επιτυχώς όταν εμφανιστεί το παρακάτω μήνυμα:
```bash
gpg: key ΑΡΙΘΜΟΣ (ΧΧΧΧΧΧΧΧ) marked as ultimately trusted
public and secret key created and signed.
pub ΧΧΧΧΑ/ΧΧΧΧΧΧΧΧ Ημερομηνία
Key fingerprint = ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ
uid Όνομα Επίθετο (Sign Package key)
sub ΥΥΥΥΒ/ΥΥΥΥΥΥΥΥ Ημερομηνία```

Αφού κάνουμε τα έξι βήματα παραπάνω, βλέπουμε στο τελευταίο μήνυμα πως το κλειδί δημιουργήθηκε. Σε αυτό το σημείο θα μας χρειαστεί αυτός ο οκταψήφιος συνδυασμός αριθμών-γραμμάτων που φαίνεται στην γραμμή «**pub**» ως **ΧΧΧΧΧΧΧΧ** στο τελευταίο μήνυμα στο **βήμα 6**, καθώς και αυτό το **Key fingerprint** που εδώ αναγράφεται ως **ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ ΧΧΧΧ**.

Ακόμη, πρέπει να δηλώσουμε το κλειδί στους servers του Ubuntu, ώστε να είναι δημόσιο. Αυτό το κάνουμε ακολουθώντας τα βήματα παρακάτω:

1. Στον υπολογιστή μας, ανοίγουμε το «**Passwords and Encryption keys**».
2. Πηγαίνουμε στην καρτέλα «**GnuPG Keys**» και βλέπουμε στη λίστα το κλειδί που δημιουργήθηκε προηγουμένως. Κάνουμε ένα κλικ επάνω του (δεν θα γίνει τίποτα).
3. Στο μενού, επιλέγουμε «**Remote**» και «**Sync and Publish Keys…**».
4. Στο παράθυρο που θα ανοίξει, πατάμε το κουμπί «**Key Servers**» και στο επόμενο παράθυρο το κουμπί «**Add**» και στο πλαίσιο «**Host**» βάζουμε τον σύνδεσμο: **keyserver.ubuntu.com** και πατάμε «**OK**».
5. Μετά, θα έχουμε επιστρέψει στο προηγούμενο παράθυρο όπου στη λίστα του «**Publish keys to:**» θα υπάρχει ο παραπάνω σύνδεσμος. Τον επιλέγουμε με το ποντίκι (ένα κλικ) και πατάμε το κουμπί «**Close**».
6. Tέλος, στο προηγούμενο παράθυρο πατάμε το κουμπί «**Sync**» προκειμένου να ανεβάσουμε το κλειδί μας στους servers του Ubuntu, κάτι που μπορεί να διαρκέσει έως και 30 λεπτά.

Αφού όλη αυτή η διαδικασία γίνεται για πακετάρισμα λογισμικού, καλό θα είναι να δηλώσουμε το κλειδί που δημιουργήθηκε προηγουμένως στο Launchpad, σε περίπτωση που θέλουμε να ανεβάσουμε τα πακέτα που παράγουμε εκεί, σε δικό μας αποθετήριο. Οπότε, ας δούμε πως δηλώνουμε το κλειδί μας στο Launchpad:

1. Δημιουργία λογαριασμού στο [Launchpad](https://login.launchpad.net/+login) (φαίνεται πως γίνεται αυτό στον σύνδεσμο παραπάνω). Εννοείται παραλείπουμε αυτό το βήμα αν έχουμε ήδη λογαριασμό.
2. Στον υπολογιστή μας, ανοίγουμε το «**Passwords and Encryption keys**».
3. Πηγαίνουμε στην καρτέλα «**GnuPG Keys**» και βλέπουμε στη λίστα το κλειδί μας όπως και προηγουμένως.
4. Πατάμε δεξί κλικ στο κλειδί και στη συνέχεια «**Properties**».
5. Στο παράθυρο που θα ανοίξει, πηγαίνουμε στην καρτέλα «**Details**» και αντιγράφουμε το 
**fingerprint** του κλειδιού.
6. Ανοίγουμε τον browser και πηγαίνουμε στον λογαριασμό μας στο Launchpad και πατάμε το κίτρινο κουμπί με το μολύβι δίπλα από το «**OpenPGP keys**».
7. Αφού μας ζητηθεί να ξανακάνουμε login για επαλήθευση, στη σελίδα που θα ανοίξει πάμε κάτω κάτω, κάνουμε επικόλληση το fingerprint στο αντίστοιχο πλαίσιο και πατάμε το κουμπί «**Import**».

Αφού ολοκληρωθεί και αυτό, θα λάβουμε ένα e-mail στο οποίο θα εμπεριέχεται ένα κείμενο κρυπτογραφημένο με το κλειδί που ανεβάσαμε στο Launchpad. Το αποκρυπτογραφούμε ακολουθώντας τα εξής βήματα:

1. Αντιγράφουμε το κρυπτογραφημένο κείμενο (**μόνο αυτό**) από το e-mail και το κάνουμε επικόλληση σε ένα αρχείο με όνομα «**file.txt**».
2. Στην συνέχεια, ανοίγουμε το τερματικό μας και εκτελούμε την εντολή:
```bash
gpg --decrypt file.txt```
Αφού προηγουμένως, έχουμε πλοηγηθεί στον φάκελο όπου είναι αποθηκευμένο το αρχείο.
3. Θα μας ζητηθεί να πληκτρολογήσουμε τον κωδικό του κλειδιού.
4. Μετά την πληκτρολόγηση του κωδικού, το μήνυμα θα αποκρυπτογραφηθεί και θα περιέχει έναν σύνδεσμο τον οποίο ακολουθούμε για να επιβεβαιώσουμε την εισαγωγή του κλειδιού μας στο Launchpad.
